!function(){"use strict";class t extends HTMLElement{constructor(){super(),this.initial=!1,this.dom={project:null,current:null,next:null},this.length=0,this.current=0,this.next=0,this.isAuto=!0,this.working=!1,this.dom.project=this.querySelectorAll("xb-section-background-slider-item"),this.length=this.dom.project.length,this.image={1:"https://cdn.shopify.com/s/files/1/0677/7900/2622/files/nature-sprite.png?v=1724140173",2:"https://cdn.xotiny.com/builder/bg/nature-sprite-2.png",3:"https://cdn.xotiny.com/builder/bg/building-sprite.png",4:"https://cdn.xotiny.com/builder/bg/building-sprite-2.png",5:"https://cdn.xotiny.com/builder/bg/urban-sprite.png",6:"https://cdn.xotiny.com/builder/bg/urban-sprite-2.png"}}static get observedAttributes(){return["xb-observed"]}getImage(t){return new Promise(((e,i)=>{const s=new Image;s.onload=()=>e(s.height),s.onerror=i,s.src=t}))}async init(){const t=this.getAttribute("xb-type")??1;if(this.dom.project=this.querySelectorAll("xb-section-background-slider-item"),this.length=this.dom.project.length,this.length>1&&(this.dom.project.forEach((t=>{t.style.zIndex=10})),this.dom.current=this.dom.project[this.current],this.dom.next=this.dom.project[this.current+1],this.dom.current&&(this.dom.current.style.zIndex=30),this.dom.next&&(this.dom.next.style.zIndex=20)),this.image[t]&&await this.getImage(this.image[t]),this.length>1){const t=Number(this.getAttribute("xb-duration")??1400)+Number(this.getAttribute("xb-delay")??2e3);this.auto=setInterval(this.updateNext.bind(this),t)}}clear(){this.auto&&clearInterval(this.auto)}updateNext(){this.next=(this.current+1)%this.length,this.handleProcess()}updatePrevious(){this.next--,this.next<0&&(this.next=this.length-1),this.handleProcess()}handleProcess(){var t=this;this.working=!0,this.dom.next=this.dom.project[this.next],this.dom.current.style.zIndex=30,t.dom.next.style.zIndex=20,this.dom.current.classList.add("xb-section-background-slider-animated");const e=Number(this.getAttribute("xb-duration")??1400);setTimeout((function(){t.dom.current.style.zIndex=10,t.dom.next.style.zIndex=30,t.dom.current.classList.remove("xb-section-background-slider-animated"),t.dom.current=t.dom.next,t.current=t.next,t.working=!1}),e)}connectedCallback(){this.init(),this.initial=!0}disconnectedCallback(){this.clear()}attributeChangedCallback(t,e,i){e!==i&&"xb-observed"===t&&this.initial&&(this.clear(),this.init())}}window.customElements.get("xb-section-background-slider")||window.customElements.define("xb-section-background-slider",t)}();
